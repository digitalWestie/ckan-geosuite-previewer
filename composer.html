<!-- GeoExplorer resources -->
<link rel="stylesheet" type="text/css" href="../theme/app/geoexplorer.css" />
<!--[if IE]><link rel="stylesheet" type="text/css" href="../theme/app/ie.css"/><![endif]-->
<link rel="stylesheet" type="text/css" href="../theme/ux/colorpicker/color-picker.ux.css" />
<script type="text/javascript" src="../script/GeoExplorer.js"></script>
<script type="text/javascript" src="../script/jquery-git2.min.js"></script>
<script type="text/javascript" src="../script/geoparams.js"></script>

<!-- PrintPreview resources -->
<link rel="stylesheet" type="text/css" href="../externals/printpreview/resources/css/printpreview.css">

<script>
var sources = {
  local: {
    url: "/geoserver/ows",
    title: "Local GeoServer",
    ptype: "gxp_wmscsource"
  },
  csw: {
    url: "/geoserver/csw",
    ptype: "gxp_cataloguesource",
    yx: {'urn:x-ogc:def:crs:EPSG:6.11:4326': true}
  },
  suite: {
    url: "http://v2.suite.opengeo.org/geoserver/ows",
    title: "Remote Suite GeoServer"
  },
  mapquest: {
    ptype: "gxp_mapquestsource"
  },
  osm: {
    ptype: "gxp_osmsource"
  },
  google: {
    ptype: "gxp_googlesource"
  },
  bing: {
    ptype: "gxp_bingsource"
  },
  mapbox: {
    ptype: "gxp_mapboxsource"
  },
  ol: {
    ptype: "gxp_olsource"
  }
};

var map = {
  projection: "EPSG:102113",
  layers: [{
      source: "mapquest",
      title: "MapQuest OpenStreetMap",
      name: "osm",
      group: "background"
  }, {
      source: "ol",
      group: "background",
      fixed: true,
      type: "OpenLayers.Layer",
      args: [
          "None", {visibility: false}
      ]
  }],
  center: [0, 0],
  zoom: 2
};

var pdata = extendMapAndSourcesFromParams(map, sources);

Ext.BLANK_IMAGE_URL = "../theme/app/img/blank.gif";
OpenLayers.ImgPath = "../theme/app/img/";
// optionally set locale based on query string parameter
if (GeoExt.Lang) {
  GeoExt.Lang.set(OpenLayers.Util.getParameters()["locale"] || GeoExt.Lang.locale);
}

var app = new GeoExplorer.Composer({
  authStatus: {{status}},
  proxy: "../proxy/?url=",
  printService: "/geoserver/pdf/",
  about: {
    title: "GeoExplorer Demo Map",
    "abstract": "This is a demonstration of GeoExplorer, an " +
    "application for assembling and publishing web-based maps. " +
    "After adding layers to the map, use the 'Publish map' " +
    "tool to embed this map in any web page.",
    contact: "For more information, contact <a href='http://boundlessgeo.com'>Boundless</a>."
  },
  defaultSourceType: "gxp_wmscsource",
  sources: sources,
  map: map,
  listeners: {
    ready: function() { zoomToLayer(this, pdata); }
  }
});

</script>